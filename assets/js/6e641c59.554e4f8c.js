"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5405],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return u}});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=o.createContext({}),d=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=d(e.components);return o.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),m=d(n),u=a,k=m["".concat(l,".").concat(u)]||m[u]||c[u]||r;return n?o.createElement(k,i(i({ref:t},s),{},{components:n})):o.createElement(k,i({ref:t},s))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=m;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:a,i[1]=p;for(var d=2;d<r;d++)i[d]=n[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1021:function(e,t,n){n.r(t),n.d(t,{assets:function(){return l},contentTitle:function(){return i},default:function(){return c},frontMatter:function(){return r},metadata:function(){return p},toc:function(){return d}});var o=n(3117),a=(n(7294),n(3905));const r={},i="Android configuration",p={unversionedId:"android",id:"android",title:"Android configuration",description:"Upon installation of this plugin, configuration is needed on Android before running the project again. If this is not done, an error of No implementation found would show because the Facebook SDK on Android would throw an Exception error if the configuration is not yet defined. This error also locks the other plugins in your project, so if the plugin is not yet needed, either remove it or comment it out from the pubspec.yaml file.",source:"@site/docs/android.md",sourceDirName:".",slug:"/android",permalink:"/docs/7.x.x/android",draft:!1,editUrl:"https://github.com/darwin-morocho/flutter-facebook-auth/tree/master/website/docs/android.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"intro",permalink:"/docs/7.x.x/intro"},next:{title:"iOS configuration",permalink:"/docs/7.x.x/ios"}},l={},d=[],s={toc:d};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"android-configuration"},"Android configuration"),(0,a.kt)("admonition",{title:"IMPORTANT",type:"danger"},(0,a.kt)("p",{parentName:"admonition"},"Upon installation of this plugin, configuration is needed on Android before running the project again. If this is not done, an error of ",(0,a.kt)("strong",{parentName:"p"},"No implementation found")," would show because the Facebook SDK on Android would throw an Exception error if the configuration is not yet defined. This error also locks the other plugins in your project, so if the plugin is not yet needed, either remove it or comment it out from the pubspec.yaml file.")),(0,a.kt)("admonition",{title:"IMPORTANT",type:"danger"},(0,a.kt)("p",{parentName:"admonition"},"Since the native facebook sdk 15.0.0 the ",(0,a.kt)("inlineCode",{parentName:"p"},"minSdkVersion")," required is ",(0,a.kt)("inlineCode",{parentName:"p"},"21"),".\nYou must go to ",(0,a.kt)("inlineCode",{parentName:"p"},"android/app/build.gradle")," and define ",(0,a.kt)("inlineCode",{parentName:"p"},"minSdkVersion")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"21")),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre"},"    defaultConfig {\n        ...\n        minSdkVersion 21\n        targetSdkVersion 33\n        ...\n    }\n"))),(0,a.kt)("p",null,"Go to ",(0,a.kt)("a",{parentName:"p",href:"https://developers.facebook.com/docs/facebook-login/android/?locale=en"},"Facebook Login for Android - Quickstart")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Select an App or Create a New App")),(0,a.kt)("img",{src:"https://user-images.githubusercontent.com/15864336/98711287-cedfdc80-2352-11eb-9eb3-761f43ba4f7e.png"}),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Skip the step 2 (Download the Facebook App)")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Skip the step 3 (Integrate the Facebook SDK)")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Edit ",(0,a.kt)("strong",{parentName:"p"},"Your Resources and Manifest")," add this config in your android project"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Open your ",(0,a.kt)("inlineCode",{parentName:"p"},"/android/app/src/main/res/values/strings.xml")," file, or create one if it doesn't exists.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Add the following (replace ",(0,a.kt)("inlineCode",{parentName:"p"},"{your-app-id}")," with your facebook app Id) and with your client token:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'    <string name="facebook_app_id">{your-app-id}</string>\n    <string name="facebook_client_token">YOUR_CLIENT_TOKEN</string>\n')),(0,a.kt)("p",{parentName:"li"}," Here one example of ",(0,a.kt)("inlineCode",{parentName:"p"},"strings.xml")),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="utf-8"?>\n<resources>\n    <string name="facebook_app_id">1365719610250300</string>\n    <string name="facebook_client_token">YOUR_CLIENT_TOKEN</string>\n</resources>\n')),(0,a.kt)("p",{parentName:"li"}," You can find the ",(0,a.kt)("strong",{parentName:"p"},"client token")," in your facebook developers console"),(0,a.kt)("img",{src:"https://user-images.githubusercontent.com/15864336/144253037-f1750fbd-62ac-42fb-88a6-2f7ed8113f3e.png"})),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Open the ",(0,a.kt)("inlineCode",{parentName:"p"},"/android/app/src/main/AndroidManifest.xml")," file.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Add the following uses-permission element before the application element"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<uses-permission android:name="android.permission.INTERNET"/>\n'))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Add the following meta-data element, an activity for Facebook, and an activity and intent filter for Chrome Custom Tabs inside your application element"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<meta-data android:name="com.facebook.sdk.ApplicationId" android:value="@string/facebook_app_id"/>\n<meta-data android:name="com.facebook.sdk.ClientToken" android:value="@string/facebook_client_token"/>\n')),(0,a.kt)("p",{parentName:"li"},"Here one example of ",(0,a.kt)("inlineCode",{parentName:"p"},"AndroidManifest.xml")),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<manifest xmlns:android="http://schemas.android.com/apk/res/android"\n    package="app.meedu.flutter_facebook_auth_example">\n    <uses-permission android:name="android.permission.INTERNET" />\n    <application\n       android:name="${applicationName}"\n       android:icon="@mipmap/ic_launcher"\n       android:label="facebook auth">\n\n       <meta-data\n           android:name="com.facebook.sdk.ApplicationId"\n           android:value="@string/facebook_app_id" />\n       <meta-data \n           android:name="com.facebook.sdk.ClientToken" \n           android:value="@string/facebook_client_token"/>\n\n        <activity\n           android:name=".MainActivity"\n           android:configChanges="orientation|keyboardHidden|keyboard|screenSize|smallestScreenSize|locale|layoutDirection|fontScale|screenLayout|density|uiMode"\n           android:hardwareAccelerated="true"\n           android:launchMode="singleTop"\n           android:theme="@style/LaunchTheme"\n           android:exported="true"\n           android:windowSoftInputMode="adjustResize">\n           <meta-data\n               android:name="io.flutter.embedding.android.NormalTheme"\n               android:resource="@style/NormalTheme" />\n           <meta-data\n               android:name="io.flutter.embedding.android.SplashScreenDrawable"\n               android:resource="@drawable/launch_background" />\n           <intent-filter>\n               <action android:name="android.intent.action.MAIN" />\n               <category android:name="android.intent.category.LAUNCHER" />\n           </intent-filter>\n       </activity>\n       <meta-data\n           android:name="flutterEmbedding"\n           android:value="2" />\n    </application>\n</manifest>\n')))))),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Associate Your Package Name and Default Class with Your App"),(0,a.kt)("img",{src:"https://user-images.githubusercontent.com/15864336/98712455-54b05780-2354-11eb-9509-aa2846af1a2d.png"}),(0,a.kt)("ol",{parentName:"li",start:6},(0,a.kt)("li",{parentName:"ol"},"Provide the Development and Release Key Hashes for Your App")),(0,a.kt)("img",{src:"https://user-images.githubusercontent.com/15864336/98712555-73aee980-2354-11eb-9c25-c1ef3760fce1.png"}),(0,a.kt)("p",{parentName:"li"},"To find info to how to generate you key hash go to ",(0,a.kt)("a",{parentName:"p",href:"https://developers.facebook.com/docs/facebook-login/android?locale=en_US#6--provide-the-development-and-release-key-hashes-for-your-app"},"https://developers.facebook.com/docs/facebook-login/android?locale=en_US#6--provide-the-development-and-release-key-hashes-for-your-app")),(0,a.kt)("blockquote",{parentName:"li"},(0,a.kt)("p",{parentName:"blockquote"},"Note: if your application uses ",(0,a.kt)("a",{parentName:"p",href:"https://support.google.com/googleplay/android-developer/answer/9842756?visit_id=637406280862877202-1623101210&rd=1"},"Google Play App Signing")," then you should get certificate SHA-1 fingerprint from Google Play Console and convert it to base64")),(0,a.kt)("blockquote",{parentName:"li"},(0,a.kt)("p",{parentName:"blockquote"},"You should add key hashes for every build variants like release, debug, CI/CD, etc.")))),(0,a.kt)("ol",{start:6},(0,a.kt)("li",{parentName:"ol"},"Queries\nApps that target Android API 30+ (Android 11+) cannot call Facebook native apps unless the package visibility needs are declared. Please follow ",(0,a.kt)("a",{parentName:"li",href:"https://developers.facebook.com/docs/android/troubleshooting/#faq_267321845055988"},"https://developers.facebook.com/docs/android/troubleshooting/#faq_267321845055988")," to make the declaration. To solve it you have to add in the AndroidManifest.xml file:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<manifest package="com.example.app">\n    <queries>\n        <provider android:authorities="com.facebook.katana.provider.PlatformProvider" />\n    </queries>\n    ...\n</manifest>\n')),(0,a.kt)("ol",{start:7},(0,a.kt)("li",{parentName:"ol"},"(Optional)\nTo opt out of the Advertising ID Permission, add a uses-permission element to the manifest after the application element")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml"},'<uses-permission android:name="com.google.android.gms.permission.AD_ID" tools:node="remove"/>\n')),(0,a.kt)("admonition",{title:"KEEP IN MIND",type:"danger"},(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"If your app is still in developing mode in your ",(0,a.kt)("inlineCode",{parentName:"p"},"facebook console")," to test the ",(0,a.kt)("inlineCode",{parentName:"p"},"login flow")," you only can use ",(0,a.kt)("a",{parentName:"p",href:"https://developers.facebook.com/docs/development/build-and-test/test-users/"},"test accounts")," or use the facebook account which is the owner of the app in the facebook developer console.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"If want to test the login flow with the native facebook app and your app is in developing mode your account must be added to the developer team ",(0,a.kt)("a",{parentName:"p",href:"https://developers.facebook.com/docs/development/build-and-test/app-roles"},"https://developers.facebook.com/docs/development/build-and-test/app-roles"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"If you want to get the user email and public profile you must check in your facebook developers console\nthat you have that permissions enabled.\n",(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/15864336/198648412-201fcd9b-8c24-440f-893e-23c5c6efc664.png",alt:"image"})))),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Starting with Android 11 the facebook ",(0,a.kt)("inlineCode",{parentName:"p"},"ClientToken")," is mandatory (check the above example).")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Facebook app to perform the login request when it is installed. The native Facebook app compare your app signing(key hash) with the key hash registered in your Facebook developers console. If the login flow doesn't works with the Facebook app that means that you have problems with your hash. Make sure that you have added the correct key hashes in your console.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"If you get error like this:\n",(0,a.kt)("inlineCode",{parentName:"p"},"Missing 'package' key attribute on element package at ...")," "),(0,a.kt)("p",{parentName:"li"}," This issue happens for the combination of:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"Using Android-SDK's API level 31 (or later),\nWith old Gradle version(s).\n")),(0,a.kt)("p",{parentName:"li"}," Check your ",(0,a.kt)("inlineCode",{parentName:"p"},"com.android.tools.build:gradle")," version in ",(0,a.kt)("inlineCode",{parentName:"p"},"android/build.gradle"),". It's should be ",(0,a.kt)("inlineCode",{parentName:"p"},"3.5.4")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"higher"),".")))))}c.isMDXComponent=!0}}]);